"use strict";(()=>{var Ge=Object.create;var B=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var $e=Object.getPrototypeOf,Xe=Object.prototype.hasOwnProperty;var Qe=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var ze=(a,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ke(e))!Xe.call(a,o)&&o!==r&&B(a,o,{get:()=>e[o],enumerable:!(t=Be(e,o))||t.enumerable});return a};var p=(a,e,r)=>(r=a!=null?Ge($e(a)):{},ze(e||!a||!a.__esModule?B(r,"default",{value:a,enumerable:!0}):r,a));var d=Qe((st,x)=>{"use strict";var m=typeof Reflect=="object"?Reflect:null,K=m&&typeof m.apply=="function"?m.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},w;m&&typeof m.ownKeys=="function"?w=m.ownKeys:Object.getOwnPropertySymbols?w=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:w=function(e){return Object.getOwnPropertyNames(e)};function Je(a){console&&console.warn&&console.warn(a)}var X=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}x.exports=c;x.exports.once=tt;c.EventEmitter=c;c.prototype._events=void 0;c.prototype._eventsCount=0;c.prototype._maxListeners=void 0;var $=10;function y(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(a){if(typeof a!="number"||a<0||X(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");$=a}});c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};c.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Q(a){return a._maxListeners===void 0?c.defaultMaxListeners:a._maxListeners}c.prototype.getMaxListeners=function(){return Q(this)};c.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var o=e==="error",i=this._events;if(i!==void 0)o=o&&i.error===void 0;else if(!o)return!1;if(o){var n;if(r.length>0&&(n=r[0]),n instanceof Error)throw n;var l=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw l.context=n,l}var h=i[e];if(h===void 0)return!1;if(typeof h=="function")K(h,this,r);else for(var u=h.length,f=ee(h,u),t=0;t<u;++t)K(f[t],this,r);return!0};function z(a,e,r,t){var o,i,n;if(y(r),i=a._events,i===void 0?(i=a._events=Object.create(null),a._eventsCount=0):(i.newListener!==void 0&&(a.emit("newListener",e,r.listener?r.listener:r),i=a._events),n=i[e]),n===void 0)n=i[e]=r,++a._eventsCount;else if(typeof n=="function"?n=i[e]=t?[r,n]:[n,r]:t?n.unshift(r):n.push(r),o=Q(a),o>0&&n.length>o&&!n.warned){n.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=a,l.type=e,l.count=n.length,Je(l)}return a}c.prototype.addListener=function(e,r){return z(this,e,r,!1)};c.prototype.on=c.prototype.addListener;c.prototype.prependListener=function(e,r){return z(this,e,r,!0)};function Ye(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(a,e,r){var t={fired:!1,wrapFn:void 0,target:a,type:e,listener:r},o=Ye.bind(t);return o.listener=r,t.wrapFn=o,o}c.prototype.once=function(e,r){return y(r),this.on(e,J(this,e,r)),this};c.prototype.prependOnceListener=function(e,r){return y(r),this.prependListener(e,J(this,e,r)),this};c.prototype.removeListener=function(e,r){var t,o,i,n,l;if(y(r),o=this._events,o===void 0)return this;if(t=o[e],t===void 0)return this;if(t===r||t.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(i=-1,n=t.length-1;n>=0;n--)if(t[n]===r||t[n].listener===r){l=t[n].listener,i=n;break}if(i<0)return this;i===0?t.shift():Ze(t,i),t.length===1&&(o[e]=t[0]),o.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};c.prototype.off=c.prototype.removeListener;c.prototype.removeAllListeners=function(e){var r,t,o;if(t=this._events,t===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var i=Object.keys(t),n;for(o=0;o<i.length;++o)n=i[o],n!="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=t[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function Y(a,e,r){var t=a._events;if(t===void 0)return[];var o=t[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?et(o):ee(o,o.length)}c.prototype.listeners=function(e){return Y(this,e,!0)};c.prototype.rawListeners=function(e){return Y(this,e,!1)};c.listenerCount=function(a,e){return typeof a.listenerCount=="function"?a.listenerCount(e):Z.call(a,e)};c.prototype.listenerCount=Z;function Z(a){var e=this._events;if(e!==void 0){var r=e[a];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]};function ee(a,e){for(var r=new Array(e),t=0;t<e;++t)r[t]=a[t];return r}function Ze(a,e){for(;e+1<a.length;e++)a[e]=a[e+1];a.pop()}function et(a){for(var e=new Array(a.length),r=0;r<e.length;++r)e[r]=a[r].listener||a[r];return e}function tt(a,e){return new Promise(function(r,t){function o(n){a.removeListener(e,i),t(n)}function i(){typeof a.removeListener=="function"&&a.removeListener("error",o),r([].slice.call(arguments))}te(a,e,i,{once:!0}),e!="error"&&rt(a,o,{once:!0})})}function rt(a,e,r){typeof a.on=="function"&&te(a,"error",e,r)}function te(a,e,r,t){if(typeof a.on=="function")t.once?a.once(e,r):a.on(e,r);else if(typeof a.addEventListener=="function")a.addEventListener(e,function o(i){t.once&&a.removeEventListener(e,o),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}});var re=p(d(),1);var S=class{#e;#t;constructor(e={},r=null,t=null){this.#e=!1,this.#t=null,this.data=e,this.target=r,this.that=t}get intercepted(){return this.#e}get returnValue(){return this.#t}respondWith(e){this.#t=e,this.#e=!0}},s=S;var E=class extends re.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.document=this.window.document,this.Document=this.window.Document||{},this.DOMParser=this.window.DOMParser||{},this.docProto=this.Document.prototype||{},this.domProto=this.DOMParser.prototype||{},this.title=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"title"),this.cookie=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"cookie"),this.referrer=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"referrer"),this.domain=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"domain"),this.documentURI=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"documentURI"),this.write=this.docProto.write,this.writeln=this.docProto.writeln,this.querySelector=this.docProto.querySelector,this.querySelectorAll=this.docProto.querySelectorAll,this.parseFromString=this.domProto.parseFromString,this.URL=e.nativeMethods.getOwnPropertyDescriptor(this.docProto,"URL")}overrideParseFromString(){this.ctx.override(this.domProto,"parseFromString",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({string:o,type:i},e,r);return this.emit("parseFromString",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.string,n.data.type)})}overrideQuerySelector(){this.ctx.override(this.docProto,"querySelector",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({selectors:o},e,r);return this.emit("querySelector",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.selectors)})}overrideDomain(){this.ctx.overrideDescriptor(this.docProto,"domain",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getDomain",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);return this.emit("setDomain",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.value)}})}overrideReferrer(){this.ctx.overrideDescriptor(this.docProto,"referrer",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("referrer",t),t.intercepted?t.returnValue:t.data.value}})}overrideCreateTreeWalker(){this.ctx.override(this.docProto,"createTreeWalker",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o,i=4294967295,n,l]=t,h=new s({root:o,show:i,filter:n,expandEntityReferences:l},e,r);return this.emit("createTreeWalker",h),h.intercepted?h.returnValue:h.target.call(h.that,h.data.root,h.data.show,h.data.filter,h.data.expandEntityReferences)})}overrideWrite(){this.ctx.override(this.docProto,"write",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[...o]=t,i=new s({html:o},e,r);return this.emit("write",i),i.intercepted?i.returnValue:i.target.apply(i.that,i.data.html)}),this.ctx.override(this.docProto,"writeln",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[...o]=t,i=new s({html:o},e,r);return this.emit("writeln",i),i.intercepted?i.returnValue:i.target.apply(i.that,i.data.html)})}overrideDocumentURI(){this.ctx.overrideDescriptor(this.docProto,"documentURI",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("documentURI",t),t.intercepted?t.returnValue:t.data.value}})}overrideURL(){this.ctx.overrideDescriptor(this.docProto,"URL",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("url",t),t.intercepted?t.returnValue:t.data.value}})}overrideCookie(){this.ctx.overrideDescriptor(this.docProto,"cookie",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getCookie",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);return this.emit("setCookie",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.value)}})}overrideTitle(){this.ctx.overrideDescriptor(this.docProto,"title",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getTitle",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);return this.emit("setTitle",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.value)}})}},ie=E;var oe=p(d(),1);var O=class extends oe.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.Audio=this.window.Audio,this.Element=this.window.Element,this.elemProto=this.Element?this.Element.prototype:{},this.innerHTML=e.nativeMethods.getOwnPropertyDescriptor(this.elemProto,"innerHTML"),this.outerHTML=e.nativeMethods.getOwnPropertyDescriptor(this.elemProto,"outerHTML"),this.setAttribute=this.elemProto.setAttribute,this.getAttribute=this.elemProto.getAttribute,this.removeAttribute=this.elemProto.removeAttribute,this.hasAttribute=this.elemProto.hasAttribute,this.querySelector=this.elemProto.querySelector,this.querySelectorAll=this.elemProto.querySelectorAll,this.insertAdjacentHTML=this.elemProto.insertAdjacentHTML,this.insertAdjacentText=this.elemProto.insertAdjacentText}overrideQuerySelector(){this.ctx.override(this.elemProto,"querySelector",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({selectors:o},e,r);return this.emit("querySelector",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.selectors)})}overrideAttribute(){this.ctx.override(this.elemProto,"getAttribute",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("getAttribute",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),this.ctx.override(this.elemProto,"setAttribute",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({name:o,value:i},e,r);return this.emit("setAttribute",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.name,n.data.value)}),this.ctx.override(this.elemProto,"hasAttribute",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("hasAttribute",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),this.ctx.override(this.elemProto,"removeAttribute",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("removeAttribute",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)})}overrideAudio(){this.ctx.override(this.window,"Audio",(e,r,t)=>{if(!t.length)return new e(...t);let[o]=t,i=new s({url:o},e,r);return this.emit("audio",i),i.intercepted?i.returnValue:new i.target(i.data.url)},!0)}overrideHtml(){this.hookProperty(this.Element,"innerHTML",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getInnerHTML",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);return this.emit("setInnerHTML",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.value)}}),this.hookProperty(this.Element,"outerHTML",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getOuterHTML",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);return this.emit("setOuterHTML",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.value)}})}overrideInsertAdjacentHTML(){this.ctx.override(this.elemProto,"insertAdjacentHTML",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({position:o,html:i},e,r);return this.emit("insertAdjacentHTML",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.position,n.data.html)})}overrideInsertAdjacentText(){this.ctx.override(this.elemProto,"insertAdjacentText",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({position:o,text:i},e,r);return this.emit("insertAdjacentText",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.position,n.data.text)})}hookProperty(e,r,t){if(!e)return!1;if(this.ctx.nativeMethods.isArray(e)){for(let i of e)this.hookProperty(i,r,t);return!0}let o=e.prototype;return this.ctx.overrideDescriptor(o,r,t),!0}},ne=O;var se=p(d(),1);var M=class extends se.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.Node=e.window.Node||{},this.nodeProto=this.Node.prototype||{},this.compareDocumentPosition=this.nodeProto.compareDocumentPosition,this.contains=this.nodeProto.contains,this.insertBefore=this.nodeProto.insertBefore,this.replaceChild=this.nodeProto.replaceChild,this.append=this.nodeProto.append,this.appendChild=this.nodeProto.appendChild,this.removeChild=this.nodeProto.removeChild,this.textContent=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"textContent"),this.parentNode=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"parentNode"),this.parentElement=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"parentElement"),this.childNodes=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"childNodes"),this.baseURI=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"baseURI"),this.previousSibling=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"previousSibling"),this.ownerDocument=e.nativeMethods.getOwnPropertyDescriptor(this.nodeProto,"ownerDocument")}overrideTextContent(){this.ctx.overrideDescriptor(this.nodeProto,"textContent",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("getTextContent",t),t.intercepted?t.returnValue:t.data.value},set:(e,r,[t])=>{let o=new s({value:t},e,r);if(this.emit("setTextContent",o),o.intercepted)return o.returnValue;e.call(r,o.data.value)}})}overrideAppend(){this.ctx.override(this.nodeProto,"append",(e,r,[...t])=>{let o=new s({nodes:t},e,r);return this.emit("append",o),o.intercepted?o.returnValue:o.target.call(o.that,o.data.nodes)}),this.ctx.override(this.nodeProto,"appendChild",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({node:o},e,r);return this.emit("appendChild",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.node)})}overrideBaseURI(){this.ctx.overrideDescriptor(this.nodeProto,"baseURI",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("baseURI",t),t.intercepted?t.returnValue:t.data.value}})}overrideParent(){this.ctx.overrideDescriptor(this.nodeProto,"parentNode",{get:(e,r)=>{let t=new s({node:e.call(r)},e,r);return this.emit("parentNode",t),t.intercepted?t.returnValue:t.data.node}}),this.ctx.overrideDescriptor(this.nodeProto,"parentElement",{get:(e,r)=>{let t=new s({element:e.call(r)},e,r);return this.emit("parentElement",t),t.intercepted?t.returnValue:t.data.node}})}overrideOwnerDocument(){this.ctx.overrideDescriptor(this.nodeProto,"ownerDocument",{get:(e,r)=>{let t=new s({document:e.call(r)},e,r);return this.emit("ownerDocument",t),t.intercepted?t.returnValue:t.data.document}})}overrideCompareDocumentPosit1ion(){this.ctx.override(this.nodeProto,"compareDocumentPosition",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({node:o},e,r);return i.intercepted?i.returnValue:i.target.call(i.that,i.data.node)})}overrideChildMethods(){this.ctx.override(this.nodeProto,"removeChild")}},ae=M;var le=p(d(),1);var L=class extends le.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.Attr=this.window.Attr||{},this.attrProto=this.Attr.prototype||{},this.value=e.nativeMethods.getOwnPropertyDescriptor(this.attrProto,"value"),this.name=e.nativeMethods.getOwnPropertyDescriptor(this.attrProto,"name"),this.getNamedItem=this.attrProto.getNamedItem||null,this.setNamedItem=this.attrProto.setNamedItem||null,this.removeNamedItem=this.attrProto.removeNamedItem||null,this.getNamedItemNS=this.attrProto.getNamedItemNS||null,this.setNamedItemNS=this.attrProto.setNamedItemNS||null,this.removeNamedItemNS=this.attrProto.removeNamedItemNS||null,this.item=this.attrProto.item||null}overrideNameValue(){this.ctx.overrideDescriptor(this.attrProto,"name",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("name",t),t.intercepted?t.returnValue:t.data.value}}),this.ctx.overrideDescriptor(this.attrProto,"value",{get:(e,r)=>{let t=new s({name:this.name.get.call(r),value:e.call(r)},e,r);return this.emit("getValue",t),t.intercepted?t.returnValue:t.target.call(t.that,t.data.name,t.data.value)},set:(e,r,[t])=>{let o=new s({name=this.name.get.call(r),value:t},e,r);if(this.emit("setValue",o),o.intercepted)return o.returnValue;o.target.call(o.that,o.data.value)}})}overrideItemMethods(){this.ctx.override(this.attrProto,"getNamedItem",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("getNamedItem",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),this.ctx.override(this.attrProto,"setNamedItem",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({name:o,value:i},e,r);return this.emit("setNamedItem",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.name,n.data.value)}),this.ctx.override(this.attrProto,"removeNamedItem",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("removeNamedItem",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),this.ctx.override(this.attrProto,"item",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({index:o},e,r);return this.emit("item",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.index)}),this.ctx.override(this.attrProto,"getNamedItemNS",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({namespace:o,localName:i},e,r);return this.emit("getNamedItemNS",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.namespace,n.data.localName)}),this.ctx.override(this.attrProto,"setNamedItemNS",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({attr:o},e,r);return this.emit("setNamedItemNS",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),this.ctx.override(this.attrProto,"removeNamedItemNS",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({namespace:o,localName:i},e,r);return this.emit("removeNamedItemNS",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.namespace,n.data.localName)})}},he=L;var ue=p(d(),1);var k=class extends ue.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.Function=this.window.Function,this.fnProto=this.Function.prototype,this.toString=this.fnProto.toString,this.fnStrings=e.fnStrings,this.call=this.fnProto.call,this.apply=this.fnProto.apply,this.bind=this.fnProto.bind}overrideFunction(){this.ctx.override(this.window,"Function",(e,r,t)=>{if(!t.length)return e.apply(r,t);let o=t[t.length-1],i=[];for(let l=0;l<t.length-1;l++)i.push(t[l]);let n=new s({script:o,args:i},e,r);return this.emit("function",n),n.intercepted?n.returnValue:n.target.call(n.that,...n.data.args,n.data.script)},!0)}overrideToString(){this.ctx.override(this.fnProto,"toString",(e,r)=>{let t=new s({fn:r},e,r);return this.emit("toString",t),t.intercepted?t.returnValue:t.target.call(t.data.fn)})}},ce=k;var de=p(d(),1);var D=class extends de.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.Object=this.window.Object,this.getOwnPropertyDescriptors=this.Object.getOwnPropertyDescriptors,this.getOwnPropertyDescriptor=this.Object.getOwnPropertyDescriptor,this.getOwnPropertyNames=this.Object.getOwnPropertyNames}overrideGetPropertyNames(){this.ctx.override(this.Object,"getOwnPropertyNames",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({names:e.call(r,o)},e,r);return this.emit("getOwnPropertyNames",i),i.intercepted?i.returnValue:i.data.names})}overrideGetOwnPropertyDescriptors(){this.ctx.override(this.Object,"getOwnPropertyDescriptors",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({descriptors:e.call(r,o)},e,r);return this.emit("getOwnPropertyDescriptors",i),i.intercepted?i.returnValue:i.data.descriptors})}},pe=D;var fe=p(d(),1);var N=class extends fe.default{constructor(e){super(),this.ctx=e,this.window=e.window,this.fetch=this.window.fetch,this.Request=this.window.Request,this.Response=this.window.Response,this.Headers=this.window.Headers,this.reqProto=this.Request?this.Request.prototype:{},this.resProto=this.Response?this.Response.prototype:{},this.headersProto=this.Headers?this.Headers.prototype:{},this.reqUrl=e.nativeMethods.getOwnPropertyDescriptor(this.reqProto,"url"),this.resUrl=e.nativeMethods.getOwnPropertyDescriptor(this.resProto,"url"),this.reqHeaders=e.nativeMethods.getOwnPropertyDescriptor(this.reqProto,"headers"),this.resHeaders=e.nativeMethods.getOwnPropertyDescriptor(this.resProto,"headers")}override(){return this.overrideRequest(),this.overrideUrl(),this.overrideHeaders(),!0}overrideRequest(){return this.fetch?(this.ctx.override(this.window,"fetch",(e,r,t)=>{if(!t.length||t[0]instanceof this.Request)return e.apply(r,t);let[o,i={}]="".split||[];let n=new s({input:o,options:i},e,r);return this.emit("request",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.input,n.data.options)}),this.ctx.override(this.window,"Request",(e,r,t)=>{if(!t.length)return new e(...t);let[o,i={}]="".split||[];let n=new s({input:o,options:i},e);return this.emit("request",n),n.intercepted?n.returnValue:new n.target(n.data.input,n.data.options)},!0),!0):!1}overrideUrl(){return this.ctx.overrideDescriptor(this.reqProto,"url",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("requestUrl",t),t.intercepted?t.returnValue:t.data.value}}),this.ctx.overrideDescriptor(this.resProto,"url",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("responseUrl",t),t.intercepted?t.returnValue:t.data.value}}),!0}overrideHeaders(){return this.Headers?(this.ctx.overrideDescriptor(this.reqProto,"headers",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("requestHeaders",t),t.intercepted?t.returnValue:t.data.value}}),this.ctx.overrideDescriptor(this.resProto,"headers",{get:(e,r)=>{let t=new s({value:e.call(r)},e,r);return this.emit("responseHeaders",t),t.intercepted?t.returnValue:t.data.value}}),this.ctx.override(this.headersProto,"get",(e,r,[t])=>{if(!t)return e.call(r);let o=new s({name:t,value:e.call(r,t)},e,r);return this.emit("getHeader",o),o.intercepted?o.returnValue:o.data.value}),this.ctx.override(this.headersProto,"set",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({name:o,value:i},e,r);return this.emit("setHeader",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.name,n.data.value)}),this.ctx.override(this.headersProto,"has",(e,r,t)=>{if(!t.length)return e.call(r);let[o]=t,i=new s({name:o,value:e.call(r,o)},e,r);return this.emit("hasHeader",i),i.intercepted?i.returnValue:i.data}),this.ctx.override(this.headersProto,"append",(e,r,t)=>{if(2>t.length)return e.apply(r,t);let[o,i]=t,n=new s({name:o,value:i},e,r);return this.emit("appendHeader",n),n.intercepted?n.returnValue:n.target.call(n.that,n.data.name,n.data.value)}),this.ctx.override(this.headersProto,"delete",(e,r,t)=>{if(!t.length)return e.apply(r,t);let[o]=t,i=new s({name:o},e,r);return this.emit("deleteHeader",i),i.intercepted?i.returnValue:i.target.call(i.that,i.data.name)}),!0):!1}},me=N;var ve=p(d(),1);

//# sourceMappingURL=uv.client.js.map

})()
